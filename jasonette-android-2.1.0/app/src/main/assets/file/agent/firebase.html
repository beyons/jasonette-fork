<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>
    ///////////////////////////////////////
    //               ðŸ›¸                  //
    //      Javascript library for       //
    //    firebase realtime Database     //
    //       BEY Ons 2020 - 2021         //
    ///////////////////////////////////////

    //////////////////////////////////////////////
    //     Retrieve data with 'GET' method      //
    //////////////////////////////////////////////
    var firebaseGet = function(tUrl,phone)
    {
        pos = 0;
        $.get(""+tUrl, function(data, status){
            Object.keys(data).forEach(function(key) {
                if(key == phone){
                      let result = data[key];
                      Object.keys(result).forEach(function(keys) {
                        let results = result[keys];
                        Object.keys(results).forEach(function(key1) {
                            if(key1 == "email" && pos < 1){
                               pos = pos + 1;
                               $agent.response(results[key1]);
                            }
                        })
                    })
                }
            })
        });
    };
    //////////////////////////////////////////////
    //       Post data with 'POST' method       //
    //////////////////////////////////////////////
    var firebasePost = function(tUrl,nom,prenom,adresse,phone,birthday,synopsis,login,password,email)
    {
        var obj = new Object();
        obj.name = nom;
        obj.surname = prenom;
        obj.adresse = adresse;
        obj.phone = phone;
        obj.birthday = birthday;
        obj.synopsis = synopsis;
        obj.login = login;
        obj.password = password;
        obj.email = email;
        const jsonUser = JSON.stringify(obj);
        $.ajax({url: tUrl, type: 'POST', data: jsonUser, success: function(result) { $agent.response(result); }, error: function(error) { $agent.response(error); }});
    };
    //////////////////////////////////////////////
    //    Delete data with 'DELETE' method      //
    //////////////////////////////////////////////
    var firebaseDel = function(tUrl)
    {
        $.ajax({url: tUrl,type: 'DELETE',success: function(result) {$agent.response(result);},error: function(error) { $agent.response(error);}});
    };
    //////////////////////////////////////////////
    //      Update data with 'PUT' method       //
    //////////////////////////////////////////////
    var firebaseUpdate = function(tUrl,nom,prenom,adresse,phone,birthday,synopsis,login,password)
    {
        var obj = new Object();
        obj.name = nom;
        obj.surname = prenom;
        obj.adresse = adresse;
        obj.phone = phone;
        obj.birthday = birthday;
        obj.synopsis = synopsis;
        obj.login = login;
        obj.password = password;
        const jsonUser = JSON.stringify(obj);
        $.ajax({url: tUrl,data: jsonUser,type: 'PUT',success: function(result) { $agent.response(result);}, error: function(error) {$agent.response(error);}});
    };
</script>